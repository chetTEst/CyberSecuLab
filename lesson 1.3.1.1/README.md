### Отработка навыков двухфакторной аутентификации

Работает на базе flask и pyotp

Позволяет провести тренировку по следующим навыкам:
1. Вход в приложение
2. Подключение двухфакторной аутентификации (Работают Я.Ключ и Гугл)
3. Вход с использованием двухфакторной аутентификации

Приложение для каждой запрошенной сессии создает логины и пароли в необходимом для учителя кол-ве.
Для каждого логина проверяется выполнение учеником одного из 4-х шагов.
Эта информация отображается в окне текущей сессии напротив каждого логина в виде бейджей.
Если бейдж окрашен в зеленый цвет, то это обозначает что ученик с данным логином преодолел этап

**Demo:** [https://lesson1311.kasperstudent.ru/](https://lesson1311.kasperstudent.ru/)

Вид страницы сесии для учителя:

![Вид страницы сесии для учителя](https://forai.school1409.ru/_media/4.png?t=1688666032&w=500&h=272&tok=e6016d)

Страница ученика:

![Страница ученика](https://forai.school1409.ru/_media/5.png?t=1688666032&w=500&h=243&tok=d0a5b0)

Страница подключения двухфакторной аутентификации:

![Страница подключение двухфакторной аутентификации](https://forai.school1409.ru/_media/6.png?t=1688666032&w=500&h=467&tok=65a2e5)

в файле [docker-compose.yml](docker-compose.yml) необходимо указать требуемые вам настройки работы с базой данных

```
    environment:
      MYSQL_ROOT_PASSWORD: lesson1311
      MYSQL_DATABASE: lesson1311
      MYSQL_USER: lesson1311
      MYSQL_PASSWORD: lesson1311
      ....
        environment:
      DB_HOST: db_lesson1311
      DB_PORT: 3306
      DB_ROOT_PASSWORD: lesson1311
      DB_DATABASE: lesson1311
      DB_USER: lesson1311
      DB_PASSWORD: lesson1311
```

Для запуска приложения на своем сервере вы можете использовать контейнеры:

```commandline
docker-compose up -d
```

После запуска контейнера lesson1311 запускается с задержкой опрашивая каждый 5 секунд базу данных. Это связано с тем, что контейнер базы данных
запускается медленнее. Через 5-10 секунд, а может и больше приложение стартанёт


Вы можете использовать и SQLite [__init__.py](flask_app%2Fapp%2F__init__.py), но это только на этапе отладки. Через
переменные окружения определяется как был осуществлен запуск, в контейнере или через run:

```python
    if environ.get('FLASK_ENV') == 'production':
        # Запущено через wsgi
        app.config['SQLALCHEMY_DATABASE_URI'] = f'mysql+pymysql://{db_user}:{db_pass}@{db_host}:{db_port}/{db_name}'
    else:
        # Запущено через run.py
        app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///' + pjoin(path, 'tmp', 'lesson.db')
```