### Документация к приложению "Automatic Security Training and Testing System"

**Работает на базе Flask**

### Назначение
Приложение предназначено для генерации коротких ссылок и редиректа по ним

### Функциональность
1. **Создание коротких ссылок**  
   С помощью API можно создавать короткие ссылки, которые перенаправляют на заданный оригинальный URL. Для создания используется автоматическая генерация идентификаторов на основе алгоритма Base62.
   
2. **Перенаправление**  
   При переходе по короткой ссылке пользователь перенаправляется на оригинальный URL.
   
3. **Минимальный интерфейс**  
   Приложение имеет базовый маршрут `/`, возвращающий статус OK, для проверки работоспособности.

---

### Особенности API

1. **Создание короткой ссылки**
   - Эндпоинт: `/api/create/<TOKEN_API_KEY>`
   - Метод: `POST`
   - Формат данных: JSON
     ```json
     {
       "url": "https://example.com"
     }
     ```
   - Возвращает:
     ```json
     {
       "short_url": "https://ksp.st/<short_id>"
     }
     ```

2. **Перенаправление по короткой ссылке**
   - Эндпоинт: `/<short_id>`
   - Метод: `GET`
   - Описание: перенаправляет на оригинальный URL.

---

### Конфигурация базы данных
Приложение поддерживает два режима работы с базой данных:
1. **Production**: Используется MySQL через `SQLAlchemy` (параметры указываются в `docker-compose.yml`).
   ```python
   app.config['SQLALCHEMY_DATABASE_URI'] = f'mysql+pymysql://{db_user}:{db_pass}@{db_host}:{db_port}/{db_name}'
   ```
2. **Development**: SQLite для отладки.
   ```python
   app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///' + pjoin(path, 'tmp', 'lesson.db')
   ```

### Запуск приложения
Для работы с контейнером:
1. Настройте параметры базы данных в `docker-compose.yml`:
   ```yaml
   environment:
     MYSQL_ROOT_PASSWORD: example
     MYSQL_DATABASE: example
     MYSQL_USER: example
     MYSQL_PASSWORD: example
   ```
2. Запустите контейнер:
   ```bash
   docker-compose up -d
   ```
3. Приложение стартует через 5-10 секунд после запуска базы данных.

---

### Основные файлы
1. `__init__.py`: настройка приложения и подключение базы данных.
2. `CreateDb.py`: создание структуры базы данных.
3. `models.py`: описание модели `ShortLink` для работы с короткими ссылками.
4. `routes.py`: основные маршруты и API для работы с короткими ссылками.

---

### Лицензия
Приложение распространяется под лицензией Apache 2.0
